# ููุณูุฉ ูุดูุงุฉ: ุงูููุงุนุฏ ุงูุซูุงุซ (The Third Base) ๐๏ธ

> **"ุงููุธุงู ุงูุฑููู ูู ุงูุนูุงุณ ููุนูุฏ ุงูุงุฌุชูุงุนู."**

ูู ูุดูุงุฉุ ูุญู ูุง ููุชุจ "ููุฏุงู" ุนุดูุงุฆูุงู. ูุญู ูุจูู ุฏููุฉ ุฑูููุฉ ุตุบูุฑุฉ ูุญูููุง ุฏุณุชูุฑ ุตุงุฑู. ูุฐุง ุงูุฏุณุชูุฑ ูููู ุนูู ูุจุฏุฃ **ูุตู ุงูุณูุทุงุช (Separation of Powers)**ุ ุชูุงูุงู ููุง ูู ุงููุธุฑูุฉ ุงูุณูุงุณูุฉ ุงูููุจุฑุงููุฉุ ูุถูุงู ุงูุนุฏุงูุฉ (Bug-free code) ูุงููุธุงู (Maintainability).

---

## ุงูุณูุทุงุช ุงูุซูุงุซ ูู ูุดูุงุฉ

### 1. ุงูุณูุทุฉ ุงูุชุดุฑูุนูุฉ: ุงูุจูุงูุงุช (The Legislative - Data/State) ๐

* **ุงููุณุคูููุฉ:** ุญูุธ "ุงูุญูููุฉ" ูุณู ุงูููุงููู (Schema).
* **ุงูููุซู:** `erdState` / `db`
* **ุงูุฏูุฑ:** ูู ุงููุตุฏุฑ ุงููุญูุฏ ููุญูููุฉ. ูุง ูููู ูุฃุญุฏ ุชุบููุฑูุง ุฅูุง ุนุจุฑ ูููุงุช ุฑุณููุฉ. ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุงูู Stateุ ูุงูุฐุงูุฑุฉ. ุฅุฐุง ูู ูููุชุจ ุงูุดูุก ููุงุ ููู ุบูุฑ ููุฌูุฏ.
* **ุดุนุงุฑูุง:** *"ุฃูุง ุงููุตุ ูุฃูุง ุงููุฑุฌุน."*

```javascript
const erdState = {
  data: { ... }, // ุงูููุงููู ุงูุญุงููุฉ
  ui: { ... }    // ุงููุฑุงุฑุงุช ุงููุคูุชุฉ
};
```

### 2. ุงูุณูุทุฉ ุงูุชูููุฐูุฉ: ุงูุฌุณุฏ (The Executive - Body/View) ๐๏ธ

* **ุงููุณุคูููุฉ:** ุชูููุฐ ุงูููุงููู ูุนุฑุถ ุงููุงูุน.
* **ุงูููุซู:** `AppView(db)` / `M.app.setBody`
* **ุงูุฏูุฑ:** ูู ูุณููุฉ ุงูุนุฑุถ ููุท. ูู "ุบุจูุฉ" ุจุงููุนูู ุงูุฅูุฌุงุจูุ ูุง ุชููุฑุ ุจู ุชููุฐ ูุง ุชูููู ุงูุณูุทุฉ ุงูุชุดุฑูุนูุฉ. ุชุฃุฎุฐ ุงูุจูุงูุงุช (Data) ูุชุญูููุง ุฅูู ูุงุฌูุฉ (UI). ุฅุฐุง ุชุบูุฑุช ุงูุจูุงูุงุชุ ูุชุบูุฑ ุงูุฌุณุฏ ุชููุงุฆูุงู.
* **ุดุนุงุฑูุง:** *"ุณูุนุงู ูุทุงุนุฉ."*

```javascript
function AppView(db) {
  // ูุง ุชูุฌุฏ ูุฑุงุฑุงุช ููุงุ ููุท ุฑุตุฏ ูุชูุซูู ููุจูุงูุงุช
  return UI.Div({}, [ db.data.title ]);
}
```

### 3. ุงูุณูุทุฉ ุงููุถุงุฆูุฉ ู ุงูุฅุฌุฑุงุฆูุฉ: ุงูุฃูุงูุฑ (The Judicial - Orders) โ๏ธ

* **ุงููุณุคูููุฉ:** ุงููุตู ูู ุงูุฃุญุฏุงุซ (Events) ูุฅุตุฏุงุฑ ุงูุฃุญูุงู.
* **ุงูููุซู:** `orders` / `gkey`
* **ุงูุฏูุฑ:** ุนูุฏูุง ูุญุฏุซ ูุฒุงุน (User Event) ุฃู ุทูุจ ุชุบููุฑุ ูุง ุชููู ุงูุณูุทุฉ ุงูุชูููุฐูุฉ ุจุงูุชุตุฑู ูู ุชููุงุก ููุณูุง. ุจู ุชุฑูุน ุงูุฃูุฑ ููุณูุทุฉ ุงููุถุงุฆูุฉ (ุนุจุฑ `gkey`). ุงูุฃูุงูุฑ (`orders`) ูู ุงูุชู ุชูุฑุฑ: ูู ูุฐุง ุงููุนู ูุงููููุ ูููู ูุฌุจ ุฃู ูุนุฏู ุงูุณูุทุฉ ุงูุชุดุฑูุนูุฉ (State) ุจูุงุกู ุนูููุ
* **ุดุนุงุฑูุง:** *"ุงูุนุฏู ุฃุณุงุณ ุงูููู."*

```javascript
'erd.save': {
  gkey: 'action:save',
  handler: (e, ctx) => {
    // ุญูู ูุถุงุฆู: ูู ุงูุจูุงูุงุช ุตุงูุญุฉุ
    if (valid) {
      // ุฃูุฑ ุจุชุนุฏูู ุงูุชุดุฑูุน (State Update)
      ctx.setState(s => ({ ...s, saved: true }));
    }
  }
}
```

---

## ููุงุฐุง ูุฐุง ุงููุตู ุงูุตุงุฑูุ

1. **ููุน ุงูุงุณุชุจุฏุงุฏ (Coupling):** ูุง ูุฌูุฒ ููุฒุฑ (View) ุฃู ูุบูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ.
2. **ุงูุดูุงููุฉ (Traceability):** ูู ุชุบููุฑ ููุฑ ุนุจุฑ "ุฃูุฑ" ูุนุฑูู ููุณุฌู.
3. **ุงูุงุณุชูุฑุงุฑ (Stability):** ุฅุฐุง ูุณุฏ ุงูุนุฑุถุ ูุงูุจูุงูุงุช ุณูููุฉ. ูุฅุฐุง ูุณุฏุช ุงูุจูุงูุงุชุ ูุงูุนุฑุถ ูุนูุณูุง ุจุตุฏู ูุชูุชุดู ุงูุฎุทุฃ.

> **ุงูุฎูุงุตุฉ:**
> ูู ูุดูุงุฉุ **ุงูุจูุงูุงุช** ุชูุดุฑูุนุ **ุงูุฌุณุฏ** ูููููุฐุ ู **ุงูุฃูุงูุฑ** ุชูุถู. ููุง ุชุฎูุท ุจูููู ููู ูุง ุชุณูุท ุฏููุชู ูู ุงูููุถู (Spaghetti Code).
